let l=25,o=3,a=5;function u(e){l=e,localStorage.setItem("workDuration",e)}function r(e){o=e,localStorage.setItem("workTimes",e)}function c(e){a=e,localStorage.setItem("breakDuration",e)}let i=null,e=null,n=null,t=0,d=null,g=null,s=0,m=null,f=null,y=null;async function I(){for(e=o;0!==e;)--e,E(l),await p(l),m.play(),0!==e&&(E(a),await p(a),m.play())}function v(){clearInterval(i),i=null,w(),b()}async function p(t){return new Promise(e=>{let n=60*t;i=setInterval(()=>{0===n?(clearInterval(i),i=null,w(),e()):(--n,k(),B())},1e3)})}function k(e=null){t=null!=e?0:(t+6)%360,n.style.transform=`rotate(${t}deg)`}function w(){k(0)}function E(e){var e=60*e,n=360/(2*o-1);g=n/e}function B(){s+=g,d.style.background=`conic-gradient(var(--soft-grey), ${s}deg, transparent ${s}deg 360deg)`}function b(){s=0,g=null,d.style.background="conic-gradient(var(--soft-grey), 0deg, transparent 0deg 360deg)"}function S(){f.style.display="none",y.style.display="flex"}function D(){f.style.display="block",y.style.display="none"}function h(){var e=localStorage.getItem("workDuration"),e=(e&&(l=e),localStorage.getItem("workTimes")),e=(e&&(o=e),localStorage.getItem("breakDuration"));e&&(l=e)}function $(){const e=document.getElementById("work-duration-input"),n=(e.value=l,e.onchange=e=>{u(e.target.value)},document.getElementById("work-times-input")),t=(n.value=o,n.onchange=e=>{r(e.target.value)},document.getElementById("break-duration-input"));t.value=a,t.onchange=e=>{c(e.target.value)}}function L(){n=document.getElementById("analog-timer-needle"),d=document.getElementById("analog-timer-completion")}function T(){f=document.getElementById("settings-dialog-content"),y=document.getElementById("settings-dialog-closed-content")}function x(){(m=new Audio("./ding.mp3")).volume=.5}function A(){h(),$(),L(),T(),x()}document.addEventListener("DOMContentLoaded",A,!1);