let l=25,i=3,r=5;function o(e){l=e,localStorage.setItem("workDuration",e)}function a(e){i=e,localStorage.setItem("workTimes",e)}function u(e){r=e,localStorage.setItem("breakDuration",e)}let c=null,e=null,d=null,t=null,n=0,g=null,s=null,m=null,f=0,y=[],p=null,k=null,v=null;async function I(){for(q(),e=i,B();0!==e;)--e,await E(l,"work"),p.play(),new Notification("Time to have a break!"),0!==e&&(await E(r,"break"),p.play(),0===e?new Notification("Good job, you finished your pomodoro!"):new Notification("Let's get back to work."))}function w(){clearInterval(c),c=null,h(),D(),N()}async function E(n,o){return new Promise(e=>{let t=60*n;c=setInterval(()=>{0===t?(clearInterval(c),c=null,h(),e()):(--t,b(),S(t,o))},1e3)})}function b(e=null){n=null!=e?0:(n+6)%360,t.style.transform=`rotate(${n}deg)`}function h(){b(0)}function B(){var t=2*i-1,e=l*i+r*(i-1),n=360*l/e,o=360*r/e;s=n/(60*l),m=o/(60*r);let a=n;for(let e=0;e<t;e+=1)y[e]=document.createElement("div"),y[e].className="analog-timer-phase-separator",y[e].style.transform=`rotate(${a}deg)`,d.appendChild(y[e]),e%2==0?a+=o:a+=n}function N(){y.forEach(e=>{e.remove()}),y=[]}function S(e,t){f+="work"===t?s:m,g.style.background=`conic-gradient(var(--soft-grey), ${f}deg, transparent ${f}deg 360deg)`}function D(){f=0,s=null,m=null,g.style.background="conic-gradient(var(--soft-grey), 0deg, transparent 0deg 360deg)"}function $(){k.style.display="none",v.style.display="flex"}function A(){k.style.display="block",v.style.display="none"}function L(){var e=localStorage.getItem("workDuration"),e=(e&&(l=e),localStorage.getItem("workTimes")),e=(e&&(i=e),localStorage.getItem("breakDuration"));e&&(r=e)}function T(){const e=document.getElementById("work-duration-input"),t=(e.value=l,e.onchange=e=>{o(e.target.value)},document.getElementById("work-times-input")),n=(t.value=i,t.onchange=e=>{a(e.target.value)},document.getElementById("break-duration-input"));n.value=r,n.onchange=e=>{u(e.target.value)}}function C(){d=document.getElementById("analog-timer-circle"),t=document.getElementById("analog-timer-needle"),g=document.getElementById("analog-timer-completion")}function P(){k=document.getElementById("settings-dialog-content"),v=document.getElementById("settings-dialog-closed-content")}function j(){(p=new Audio("./ding.mp3")).volume=.5}function q(){"granted"!==Notification.permission&&"default"===Notification.permission&&Notification.requestPermission()}function x(){L(),T(),C(),P(),j()}document.addEventListener("DOMContentLoaded",x,!1);